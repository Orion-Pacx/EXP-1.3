<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<title>EXP-1.3.2 | Advanced Library System</title>

<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
body{
margin:0;
font-family:Segoe UI;
background:#0f172a;
color:white;
}

header{
padding:20px;
background:#111827;
display:flex;
justify-content:space-between;
align-items:center;
}

.container{
display:grid;
grid-template-columns:350px 1fr;
gap:20px;
padding:20px;
}

.panel{
background:#1e293b;
padding:20px;
border-radius:12px;
}

input,select{
width:100%;
padding:8px;
margin-bottom:10px;
border:none;
border-radius:6px;
}

button{
padding:8px;
border:none;
border-radius:6px;
cursor:pointer;
}

.add-btn{background:#3b82f6;color:white;width:100%;}
.cancel-btn{background:#6b7280;color:white;width:100%;margin-top:5px;}

.controls{
display:flex;
gap:10px;
margin-bottom:15px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
gap:15px;
}

.card{
background:#1f2937;
padding:15px;
border-radius:10px;
transition:0.3s;
position:relative;
}

.card:hover{
transform:translateY(-5px);
background:#334155;
}

.badge{
position:absolute;
top:10px;
right:10px;
padding:3px 8px;
border-radius:20px;
font-size:11px;
}

.available{background:#22c55e;}
.issued{background:#ef4444;}

.genre{
background:#3b82f6;
padding:3px 8px;
border-radius:20px;
font-size:11px;
display:inline-block;
margin-bottom:5px;
}

.stats{
display:flex;
gap:15px;
margin-bottom:15px;
}

.stat{
background:#111827;
padding:10px;
border-radius:8px;
flex:1;
text-align:center;
}

.small-btn{
background:#3b82f6;
color:white;
margin-right:5px;
}

.delete-btn{
background:#ef4444;
color:white;
}
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">

function App(){

const initialBooks=[
{title:"Atomic Habits",author:"James Clear",genre:"Self-Help",year:2018,isbn:"111",status:"Available"},
{title:"Clean Code",author:"Robert Martin",genre:"Programming",year:2008,isbn:"112",status:"Available"},
{title:"Deep Work",author:"Cal Newport",genre:"Productivity",year:2016,isbn:"113",status:"Issued"},
{title:"The Pragmatic Programmer",author:"Andrew Hunt",genre:"Programming",year:1999,isbn:"114",status:"Available"},
{title:"Rich Dad Poor Dad",author:"Robert Kiyosaki",genre:"Finance",year:1997,isbn:"115",status:"Available"},
{title:"Think and Grow Rich",author:"Napoleon Hill",genre:"Finance",year:1937,isbn:"116",status:"Issued"},
{title:"Zero to One",author:"Peter Thiel",genre:"Business",year:2014,isbn:"117",status:"Available"},
{title:"The Lean Startup",author:"Eric Ries",genre:"Business",year:2011,isbn:"118",status:"Available"},
{title:"Sapiens",author:"Yuval Noah Harari",genre:"History",year:2011,isbn:"119",status:"Issued"},
{title:"1984",author:"George Orwell",genre:"Fiction",year:1949,isbn:"120",status:"Available"},
{title:"To Kill a Mockingbird",author:"Harper Lee",genre:"Fiction",year:1960,isbn:"121",status:"Available"},
{title:"The Alchemist",author:"Paulo Coelho",genre:"Fiction",year:1988,isbn:"122",status:"Available"},
{title:"The Power of Now",author:"Eckhart Tolle",genre:"Spiritual",year:1997,isbn:"123",status:"Issued"},
{title:"The Psychology of Money",author:"Morgan Housel",genre:"Finance",year:2020,isbn:"124",status:"Available"},
{title:"Introduction to Algorithms",author:"CLRS",genre:"Programming",year:2009,isbn:"125",status:"Available"},
{title:"The Hobbit",author:"JRR Tolkien",genre:"Fantasy",year:1937,isbn:"126",status:"Issued"},
{title:"Harry Potter",author:"JK Rowling",genre:"Fantasy",year:1997,isbn:"127",status:"Available"},
{title:"The Silent Patient",author:"Alex Michaelides",genre:"Thriller",year:2019,isbn:"128",status:"Available"},
{title:"Educated",author:"Tara Westover",genre:"Memoir",year:2018,isbn:"129",status:"Available"},
{title:"The Subtle Art",author:"Mark Manson",genre:"Self-Help",year:2016,isbn:"130",status:"Issued"}
];

const [books,setBooks]=React.useState(
JSON.parse(localStorage.getItem("books"))||initialBooks
);

const [form,setForm]=React.useState({title:"",author:"",genre:"",year:"",isbn:""});
const [editIndex,setEditIndex]=React.useState(null);
const [search,setSearch]=React.useState("");
const [genreFilter,setGenreFilter]=React.useState("");
const [sort,setSort]=React.useState("");

React.useEffect(()=>{
localStorage.setItem("books",JSON.stringify(books));
},[books]);

const handleSubmit=()=>{
if(!form.title||!form.author||!form.genre||!form.year||!form.isbn)
return alert("All fields required");

if(books.some(b=>b.isbn===form.isbn && editIndex===null))
return alert("Duplicate ISBN");

if(editIndex!==null){
const updated=[...books];
updated[editIndex]={...form,status:"Available"};
setBooks(updated);
setEditIndex(null);
}else{
setBooks([...books,{...form,status:"Available"}]);
}

setForm({title:"",author:"",genre:"",year:"",isbn:""});
};

const editBook=(index)=>{
setForm(books[index]);
setEditIndex(index);
};

const deleteBook=(index)=>{
setBooks(books.filter((_,i)=>i!==index));
};

const toggleStatus=(index)=>{
const updated=[...books];
updated[index].status=
updated[index].status==="Available"?"Issued":"Available";
setBooks(updated);
};

const filtered=React.useMemo(()=>{
let data=[...books];

if(search)
data=data.filter(b=>
b.title.toLowerCase().includes(search.toLowerCase())||
b.author.toLowerCase().includes(search.toLowerCase())||
b.genre.toLowerCase().includes(search.toLowerCase())
);

if(genreFilter)
data=data.filter(b=>b.genre===genreFilter);

if(sort==="year")
data.sort((a,b)=>a.year-b.year);
if(sort==="title")
data.sort((a,b)=>a.title.localeCompare(b.title));

return data;
},[books,search,genreFilter,sort]);

const total=books.length;
const available=books.filter(b=>b.status==="Available").length;
const issued=books.filter(b=>b.status==="Issued").length;

return(
<>
<header>
<h2>Advanced Library Admin Panel</h2>
<span>Total Books: {total}</span>
</header>

<div className="container">

<div className="panel">
<h3>{editIndex!==null?"Edit Book":"Add Book"}</h3>

<input placeholder="Title"
value={form.title}
onChange={e=>setForm({...form,title:e.target.value})}/>

<input placeholder="Author"
value={form.author}
onChange={e=>setForm({...form,author:e.target.value})}/>

<input placeholder="Genre"
value={form.genre}
onChange={e=>setForm({...form,genre:e.target.value})}/>

<input type="number" placeholder="Year"
value={form.year}
onChange={e=>setForm({...form,year:e.target.value})}/>

<input placeholder="ISBN"
value={form.isbn}
onChange={e=>setForm({...form,isbn:e.target.value})}/>

<button className="add-btn" onClick={handleSubmit}>
{editIndex!==null?"Update":"Add"} Book
</button>

{editIndex!==null &&
<button className="cancel-btn"
onClick={()=>{setEditIndex(null);setForm({title:"",author:"",genre:"",year:"",isbn:""});}}>
Cancel
</button>
}
</div>

<div className="panel">

<div className="stats">
<div className="stat">Total<br/>{total}</div>
<div className="stat">Available<br/>{available}</div>
<div className="stat">Issued<br/>{issued}</div>
</div>

<div className="controls">
<input placeholder="Search..."
onChange={e=>setSearch(e.target.value)}/>
<select onChange={e=>setGenreFilter(e.target.value)}>
<option value="">All Genres</option>
{[...new Set(books.map(b=>b.genre))].map(g=>
<option key={g}>{g}</option>
)}
</select>
<select onChange={e=>setSort(e.target.value)}>
<option value="">Sort</option>
<option value="year">Year</option>
<option value="title">Title</option>
</select>
</div>

<div className="grid">
{filtered.map((b,index)=>(
<div key={index} className="card">
<div className={`badge ${b.status==="Available"?"available":"issued"}`}>
{b.status}
</div>
<div className="genre">{b.genre}</div>
<h4>{b.title}</h4>
<p>{b.author}</p>
<p>{b.year}</p>
<p>ISBN: {b.isbn}</p>

<button className="small-btn"
onClick={()=>editBook(index)}>Edit</button>

<button className="small-btn"
onClick={()=>toggleStatus(index)}>Toggle</button>

<button className="delete-btn"
onClick={()=>deleteBook(index)}>Delete</button>

</div>
))}
</div>

</div>

</div>
</>
);
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);

</script>
</body>
</html>

